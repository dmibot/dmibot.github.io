<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PBR Sosmed Tool | DmiBot</title>
<link rel="icon" href="Mikrotik.svg">
<link rel="stylesheet" href="style.css">
</head>
<body>
<header>
  <button class="home-btn" onclick="window.location.href='index.html'">ğŸ  Home</button>
  <h1>ğŸ“± PBR Sosmed Tool</h1>
  <p>Pisahkan Trafik Sosmed ke Jalur Khusus</p>
</header>
<main>
  <div class="card">
    <h3>1ï¸âƒ£ Konfigurasi Routing</h3>
    <label for="ispName">Nama Routing Mark / ISP:</label>
    <input id="ispName" type="text" value="ISP-SOSMED" placeholder="ISP-SOSMED">
    <label for="gw">IP Gateway ISP Sosmed:</label>
    <input id="gw" type="text" placeholder="192.168.3.1" pattern="^([0-9]{1,3}\.){3}[0-9]{1,3}$" required>
  </div>
  <div class="card">
    <h3>2ï¸âƒ£ Metode Pembersihan (Cleanup)</h3>
    <div style="display:flex; gap:20px; margin-top:10px;">
        <label style="font-weight:normal;"><input type="radio" name="cleanupMode" value="timeout" checked> Auto Timeout (Dynamic)</label>
        <label style="font-weight:normal;"><input type="radio" name="cleanupMode" value="scheduler"> Daily Scheduler (Static)</label>
    </div>
    <div id="timeoutBox" style="margin-top:15px;">
        <label>Timeout Address List:</label>
        <input id="timeoutVal" type="text" value="04:00:00" placeholder="HH:MM:SS">
    </div>
    <div id="schedulerBox" style="margin-top:15px; display:none;">
        <label>Jam Pembersihan (Format 24h):</label>
        <input id="schedTime" type="time" value="05:00">
    </div>
  </div>
  <div class="card">
    <h3>3ï¸âƒ£ Domain Tambahan</h3>
    <label style="display:flex; align-items:center; cursor:pointer;">
        <input type="checkbox" id="manualDomainChk" style="width:auto; margin-right:10px;">
        Aktifkan Domain Manual?
    </label>
    <div id="manualDomainInput" style="display:none; margin-top:10px;">
        <label>Masukkan Domain (pisahkan dengan koma):</label>
        <textarea id="manualDomains" placeholder=".example.com, .netflix.com, .videocdn.net"></textarea>
    </div>
  </div>
  <button id="generateBtn" style="width:100%; font-size:1.2rem;">ğŸš€ Generate Script</button>
  <div class="card">
    <h3>ğŸ“œ Output Script</h3>
    <label>RAW & Mangle Rules:</label>
    <textarea id="outputBasic" readonly onclick="this.select()"></textarea>
    <button id="copyBasic">Copy RAW Config</button>
    <label style="margin-top:15px;">Routing & Scheduler:</label>
    <textarea id="outputRouting" readonly onclick="this.select()"></textarea>
    <button id="copyRouting">Copy Routing Config</button>
  </div>
</main>
<footer><p style="text-align:center; padding:20px; color:#777;">&copy; 2025 DmiBot Projects</p></footer>
<script src="modules/pbr_sosmed_tool.js"></script>
<script>
    document.querySelectorAll('input[name="cleanupMode"]').forEach(r => {
        r.addEventListener('change', () => {
            const mode = document.querySelector('input[name="cleanupMode"]:checked').value;
            document.getElementById("timeoutBox").style.display = (mode === "timeout") ? "block" : "none";
            document.getElementById("schedulerBox").style.display = (mode === "scheduler") ? "block" : "none";
        });
    });
    document.getElementById("manualDomainChk").addEventListener("change", (e) => {
        document.getElementById("manualDomainInput").style.display = e.target.checked ? "block" : "none";
    });
</script>
</body>
</html>
