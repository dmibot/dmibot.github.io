<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PBR Game Calculator | DmiBot</title>
    <link rel="icon" href="Mikrotik.svg">
    <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
    <button class="home-btn" onclick="window.location.href='index.html'">ğŸ  Home</button>
    <h1>ğŸ® PBR Game Calculator</h1>
    <p>Optimized for RouterOS v6 & v7</p>
</header>
<main>
    <div class="card">
        <h3>1ï¸âƒ£ Konfigurasi Umum</h3>
        <label for="rosVer">Versi RouterOS:</label>
        <select id="rosVer"><option value="7" selected>RouterOS v7 (Stable)</option><option value="6">RouterOS v6 (Legacy)</option></select>
        <label for="ispName">Nama Routing Mark / ISP:</label>
        <input id="ispName" type="text" placeholder="ISP-GAME" value="ISP-GAME">
        <label for="gw">IP Gateway Game:</label>
        <input id="gw" type="text" placeholder="192.168.2.1" pattern="^([0-9]{1,3}\.){3}[0-9]{1,3}$" required title="Format IP Salah">
        <div style="display: flex; gap: 10px;">
            <div style="flex:1"><label for="bwUp">Limit Upload (Mbps):</label><input id="bwUp" type="number" value="10"></div>
            <div style="flex:1"><label for="bwDown">Limit Download (Mbps):</label><input id="bwDown" type="number" value="20"></div>
        </div>
    </div>
    <div class="card">
        <h3>2ï¸âƒ£ Pilih Game</h3>
        <div id="gameCheckboxes">
             <div class="game-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px;">
                </div>
        </div>
        <h4>â• Game Manual</h4>
        <div id="manualGameList"></div>
        <button id="addManualBtn" type="button" style="background:#2196F3;">+ Tambah Game Manual</button>
    </div>
    <button id="generateBtn" style="width:100%; font-size:1.2rem;">ğŸš€ Generate Script</button>
    <div class="card">
        <h3>ğŸ“œ Output Script</h3>
        <label>Mangle Rules (Copy to Terminal):</label>
        <textarea id="outputBasic" readonly onclick="this.select()"></textarea>
        <label>Routing & QoS Rules:</label>
        <textarea id="outputRouting" readonly onclick="this.select()"></textarea>
    </div>
</main>
<footer><p style="text-align:center; padding:20px; color:#777;">&copy; 2025 DmiBot Projects</p></footer>
<script src="modules/pbr_game_calculator.js"></script>
<script>
    const container = document.querySelector('.game-grid');
    if(container && typeof gamePorts !== 'undefined'){
        Object.keys(gamePorts).forEach(key => {
            const div = document.createElement('div');
            div.innerHTML = `<label style="font-weight:normal; cursor:pointer;"><input type="checkbox" value="${key}" class="game-chk"> ${key}</label>`;
            container.appendChild(div);
        });
    }
</script>
</body>
</html>
